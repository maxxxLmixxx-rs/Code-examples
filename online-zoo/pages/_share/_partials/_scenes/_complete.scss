@use 'sass:map';
@use '../../_vars/breakpoints' as *;
@use '../../_vars/functions' as *;
@use '../../_vars/colors';

/* VARS */

$bg-height: 521;
$bg-width: 1920;

@function percentage($value, $base) {
    @return $value / $base * 100%;
}

@function min-max($min, $max, $toShrink) {
    @return MIN(MAX(#{$toShrink}, #{$min}), #{$max});
}

/* OBJECTS */

$objects: (
    "bamboo-1": (
        ">1920px": (
            x: calc(50vw - 843px - 115px),
            y: percentage(100, $bg-height),
            w: 116px,
            h: 206px,
        ),
        "<1920px": (
            x: 0%,
            y: percentage(100, $bg-height),
            w: 116px,
            h: 206px,
        ),
        "<1200px": (
            x: calc(50vw - 600px),
            y: percentage(100, $bg-height),
            w: 116px,
            h: 206px,
        ),
        url: url("../../../assets/icons/bg-items/bamboo.svg")
    ),
    "tree-1": (
        ">1920px": (
            x: calc(50vw - 610px - 130px),
            y: percentage(80, $bg-height),
            w: auto,
            h: 230px,
        ),
        "<1920px": (
            x: #{50 - vw(610 + 130)}vw,
            y: percentage(80, $bg-height),
            w: auto,
            h: min-max(90px, 230px, 25vw),
        ),
        "<1200px": (
            x: max(calc(50vw - 465px), -5%),
            y: percentage(80, $bg-height),
            w: auto,
            h: min-max(90px, 230px, 25vw),
        ),
        "<640px": (
            x: max(calc(50vw - 465px), -5%),
            y: percentage(150, $bg-height),
            w: auto,
            h: min-max(90px, 230px, 25vw),
        ),
        url: url("../../../assets/icons/bg-items/tree.svg")
    ),
    "bamboo-2": (
        ">1920px": (
            x: calc(50vw + 80px),
            y: percentage(170, $bg-height),
            w: min-max(80px, 147px, vw(147, 1200) * 100 + "vw"),
            h: auto,
        ),
        "<1920px": (
            x: min(1040px, #{100% - percentage(30, 1200)}),
            y: percentage(170, $bg-height),
            w: min-max(80px, 147px, vw(147, 1200) * 100 + "vw"),
            h: auto,
        ),
        "<1200px": (
            x: min(1040px, #{100% - percentage(30, 1200)}),
            y: percentage(170, $bg-height),
            w: min-max(80px, 147px, vw(147, 1200) * 100 + "vw"),
            h: auto,
        ),
        "<640px": (
            x: calc(100% - 35% + 40px),
            y: percentage(170, $bg-height),
            w: min-max(80px, 147px, vw(147, 1200) * 100 + "vw"),
            h: auto,
        ),
        url: url("../../../assets/icons/bg-items/bamboo.svg")
    ),
    "panda": (
        ">1920px": (
            x: calc(50vw - 10px),
            y: percentage(280, $bg-height),
            w: min-max(90px, 163px, vw(163, 1200) * 100 + "vw"),
            h: auto,
        ),
        "<1920px": (
            x: min(950px, #{100% - percentage(115, 1200)}),
            y: percentage(280, $bg-height),
            w: min-max(90px, 163px, vw(163, 1200) * 100 + "vw"),
            h: auto,
        ),
        "<1200px": (
            x: min(950px, #{100% - percentage(115, 1200)}),
            y: percentage(280, $bg-height),
            w: min-max(90px, 163px, vw(163, 1200) * 100 + "vw"),
            h: auto,
        ),
        "<640px": (
            x: calc(100% - 35%),
            y: percentage(280, $bg-height),
            w: min-max(90px, 163px, vw(163, 1200) * 100 + "vw"),
            h: auto,
        ),
        url: url("../../../assets/icons/bg-items/panda.svg")
    ),

    "tree-2": (
        ">1920px": (
            x: calc(50vw -  75px - 90px),
            y: percentage(150, $bg-height),
            w: 90px,
            h: 160px,
        ),
        "<1920px": (
            x: #{50 - vw(75 + 90)}vw, 
            y: percentage(150, $bg-height),
            w: auto,
            h: min(160px, 20vw),
        ),
        url: url("../../../assets/icons/bg-items/tree.svg")
    ),
    "tree-3": (
        ">1920px": (
            x: calc(50vw + 655px),
            y: percentage(280, $bg-height),
            w: 130px,
            h: 230px,
        ),
        "<1920px": (
            x: calc(50vw + 655px),
            y: percentage(280, $bg-height),
            w: 130px,
            h: 230px,
        ),
        url: url("../../../assets/icons/bg-items/tree.svg")
    ),
    "background": (
        ">1920px": (
            x: 50%, 
            y: 0%,
            w: 100%,
            h: 100%,
        ),
        "<1920px": (
            x: 50%,
            y: 0%,
            w: auto,
            h: auto,
        ),
        "<1200px": (
            x: 50%,
            y: 0%,
            w: max(160%, 1.6 * 640px), 
            h: auto,
        ),
        url: url("../../../assets/images/bg-delims/scene-1.svg")
    ),
);

._scene._scene--complete {
    position: relative;
    &::after {
        content: "";
        display: block;
        width: 100%;
        height: #{$bg-height}px;

        @include respond-to(">boundaries") {
            background:
                get-background($objects, "bamboo-2", ">1920px"),
                get-background($objects, "panda",  ">1920px"),
                get-background($objects, "bamboo-1", ">1920px"),
                get-background($objects, "tree-1",   ">1920px"),
                get-background($objects, "tree-2", ">1920px"),
                get-background($objects, "tree-3", ">1920px"),
                get-background($objects, "background", ">1920px");
        }
        @include respond-to("<boundaries") {
            background:
                get-background($objects, "bamboo-2", "<1920px"),
                get-background($objects, "panda",  "<1920px"),
                get-background($objects, "bamboo-1", "<1920px"),
                get-background($objects, "tree-1",   "<1920px"),
                get-background($objects, "tree-2", "<1920px"),
                get-background($objects, "tree-3", "<1920px"),
                get-background($objects, "background", "<1920px");
        }
        @include respond-to("<desktop") {
            height: #{vw(525, 1200) * 100}vw;
            background:
                get-background($objects, "bamboo-2", "<1200px"),
                get-background($objects, "panda",  "<1200px"),
                get-background($objects, "bamboo-1", "<1200px"),
                get-background($objects, "tree-1",   "<1200px"),
                get-background($objects, "tree-2", "<1920px"),
                get-background($objects, "tree-3", "<1920px"),
                get-background($objects, "background", "<1200px");
        }

        @include respond-to("<tablet") {
            height: 300px;
            background:
                get-background($objects, "bamboo-2", "<640px"),
                get-background($objects, "panda",  "<640px"),
                get-background($objects, "bamboo-1", "<1200px"),
                get-background($objects, "tree-1",   "<640px"),
                // get-background($objects, "tree-2", "<1920px"),
                get-background($objects, "tree-3", "<1920px"),
                get-background($objects, "background", "<1200px");
        }
    }
}
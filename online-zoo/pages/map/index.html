<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/main.css">
    <script type="module" src="../_share/_scripts/_header.js" defer></script>
    <style> .tooltip { opacity: 0; user-select: none; } </style>
    <title>Map</title>
</head>
<body>
    <header class="header">
        <div class="_wrapper _wrapper--right">
            <div class="header__wrapper _wrapper__inner">
                <nav class="nav nav--burger-tablet">
                    <div class="nav__logo">
                        <h1 class="logo">
                            <!-- https://stackoverflow.com/questions/3239202/whats-the-correct-way-to-hide-the-h1-tag-and-not-be-banned-from-google -->
                            <a class="logo__link nav__link" href="../landing/">
                                <img class="logo__img" width="108" height="84" src="../../assets/icons/logo.svg" alt="online zoo">
                            </a>
                        </h1>
                    </div>
                    <div class="nav__body">
                        <ul class="nav__list">
                            <li class="nav__item"><a class="nav__link" href="../landing/">About</a></li>
                            <li class="nav__item nav__item--active"><a class="nav__link" href="../map/">Map</a></li>
                            <li class="nav__item"><a class="nav__link" href="../zoos/panda/">Zoos</a></li>
                            <li class="nav__item"><a class="nav__link" href="../error/">Contact us</a></li>
                            <li class="nav__item"><a class="nav__link" 
                                href="https://www.figma.com/file/vzrwoqf0kSG1uOify8BRBR/online-zoo?node-id=0%3A1">Design</a></li>
                            <li class="nav__item _tablet-appear"><a class="nav__link" href="../error/">My Account</a></li>
                        </ul>
                    </div>
                </nav>
                <div class="menu">
                    <ul class="menu__list">
                        <li class="menu__item menu__search">
                            <div id="search" class="search">
                                <input class="search__input" type="text" placeholder="Search...">
                                <button class="search__btn">
                                    <svg class="search__icon" width="28" height="28" fill="none"><path d="M11.3 20.7a9.3 9.3 0 100-18.7 9.3 9.3 0 000 18.7zM26 26l-8-8" stroke-width="2.8" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                </button>
                            </div>
                        </li>
                        <li class="menu__item menu__log-in _header-load">
                            <button id="logButton" class="menu__button">Log in</button>
                        </li>
                        <li class="menu__item menu__sign-up _header-load">
                            <button id="signButton" class="menu__button menu__button--round">Sign up</button>
                        </li>
                        <li class="menu__item menu__user">
                            <div id="authUser" class="user">
                                <button id="userLogo" class="user__logo"></button>
                                <span class="user__name"></span>
                                <ul class="user__dropdown">
                                    <li class="user__dropdown-item">
                                        <button id="userLogOut" class="user__log-button">Log out</button>
                                    </li>
                                </ul>
                            </div>
                        </li>
                    </ul>
                </div>
                <button id="burger" class="burger"><span></span></button>
            </div>
        </div>
    </header>
    <main class="main">
        <section class="map">
            <div class="_wrapper _wrapper--middle">
                <div class="map__wrapper _wrapper__inner">
                    <div class="map__header">
                        <h3 class="map__heading section-heading section-heading--light">Choose your favorite Animal</h3>
                    </div>
                </div>
            </div>
            <div class="map__body">
                <svg width="0" height="0" class="pet-card__clip-svg"
                        style="position: absolute;">
                    <defs>
                        <mask id="petCardClip">
                            <rect fill="white" x="-100" y="-100" width="436" height="435"/>
                            <path fill="black" d="M213.77 53.87c19.85 26.78 25.36 63.28 15.07 91.34-10.29 28.06-36.02 47.87-65.62 63.28-29.4 15.4-62.67 26.6-90.98 16.88-28.3-9.54-51.83-39.62-61.94-75.2C.38 114.57 3.87 73.5 25.2 46.52 46.69 19.4 85.84 6.18 122.79 8.2c36.76 2.02 71.13 19.08 90.98 45.67z"/>
                        </mask>
                        <rect id="clippedRect" mask="url(#petCardClip)" x="-100" y="-100" width="436" height="435"/>
                    </defs>
                </svg>
                <div class="map__svg-container">
                    <svg id="mapSvg" class="map__svg _hide-onload" width="1422" height="912" viewBox="0 0 1422 1162">
                        <!-- Hidden -->
                        <defs>
                            <!-- ClipPath -->
                            <clipPath id="avatarClip">
                                <path id="avatarClipPath" d="M66.57 14.63c6.33 8.54 8.1 20.18 4.81 29.13-3.28 8.94-11.49 15.26-20.92 20.17-9.38 4.92-20 8.48-29.02 5.38C12.42 66.27 4.91 56.68 1.7 45.33-1.47 34-.36 20.9 6.44 12.3 13.3 3.63 25.78-.58 37.56.06c11.72.65 22.68 6.09 29.01 14.57z" />
                            </clipPath>
                            <!-- Components -->
                            <g id="avatarBg">
                                <!-- fill="#C5E1E6" -->
                                <path d="M92.08 23.23c7.8 10.05 9.97 23.76 5.92 34.3-4.04 10.54-14.16 17.98-25.8 23.77-11.56 5.78-24.64 9.99-35.76 6.33C25.3 84.05 16.06 72.76 12.08 59.4c-3.9-13.36-2.52-28.8 5.86-38.92 8.45-10.2 23.84-15.15 38.37-14.4 14.45.76 27.96 7.17 35.77 17.16z"/>
                            </g>
                            <g id="tooltipBg">
                                <!-- fill="#FFFFFF" -->
                                <path id="tooltipPath" d="M0 10A10 10 0 0110 0h390a10 10 0 0110 10v69a10 10 0 01-10 10H225.8a10 10 0 00-7.8 3.7l-8.5 10.6a4 4 0 01-6.1.2l-10-11.1A10 10 0 00186 89H10A10 10 0 010 79V10z"/>
                            </g>
                            <g id="tooltipBgRotate">
                                <use href="#tooltipPath" transform="translate(0,110), scale(1,-1)"/>
                            </g>
                        </defs>
                        <!-- shape-rendering="geometricPrecision" -->
                        <g id="mapCenter">
                            <!-- Fill empty spaces for drag&drop -->
                            <rect x="0" y="0" width="1422" height="912" fill="transparent"/>
                            <!-- Map -->
                            <!-- <image width="1422" href="../../assets/images/map/map.svg"/> -->
                            <image width="1422" href="../../assets/images/map/map-4k-min.png"/>
                            <!-- Animals -->
                            <g id="animals">
                                <!-- border-radius: 120% 120% 170% 100% / 120% 120% 150% 150%; -->
                                <!-- LESS LAGGY then <g transform="translate(x,y)"> ... </g>   -->
                                <g id="eagle">
                                    <svg x="140" y="345" width="120" height="115" viewBox="-5 -5 86 86"
                                         class="avatar"
                                        >
                                        <a href="../zoos/eagle/">
                                            <clipPath id="eagleClip" class="avatar__clip"><use href="#avatarClipPath"/></clipPath>
                                            <use class="avatar__back" x="-17" y="-11" href="#avatarBg" fill="black"/>
                                            <image class="avatar__img" x="-65" y="-22" width="165" height="110" clip-path="url(#eagleClip)" href="../../assets/images/animals/nathan-lemon.jpg"/>
                                        </a>
                                    </svg>
                                    <svg x="0" y="225" width="410" height="110"
                                         viewBox="0 0 410 110"
                                         class="tooltip"
                                        >
                                        <use class="tooltip__back" href="#tooltipBg"/>
                                        <text x="50%" y="30%" class="tooltip__name" dominant-baseline="middle" text-anchor="middle">
                                            Eagle
                                        </text>
                                        <text x="50%" y="50%" class="tooltip__description" dominant-baseline="middle" text-anchor="middle">
                                            Catalina Island
                                        </text>
                                    </svg>
                                </g>
                                <g id="alligator">
                                    <svg x="320" y="435" width="120" height="115" viewBox="-5 -5 86 86"
                                         class="avatar"
                                        >
                                        <a href="../zoos/alligator/">
                                            <clipPath id="alligatorClip" class="avatar__clip"><use href="#avatarClipPath"/></clipPath>
                                            <use class="avatar__back" x="-17" y="-11" href="#avatarBg"/>
                                            <image class="avatar__img" x="-5" y="-17" width="139" height="93" clip-path="url(#alligatorClip)" href="../../assets/images/animals/matthew-essman.jpg"/>
                                        </a>
                                    </svg>
                                    <svg x="165" y="555" width="410" height="110" 
                                         viewBox="0 0 410 110"
                                         class="tooltip tooltip--reverse" fill="none"
                                        >
                                        <use class="tooltip__back" href="#tooltipBgRotate"/>
                                        <text x="50%" y="50%" class="tooltip__name" dominant-baseline="middle" text-anchor="middle">
                                            Alligator
                                        </text>
                                        <text x="50%" y="70%" class="tooltip__description" dominant-baseline="middle" text-anchor="middle">
                                            St. Augustine's Alligator Farm Zoological Park
                                        </text>
                                        <!-- <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle"></text> -->
                                    </svg>
                                </g>
                                <g id="gorilla">
                                    <svg x="655" y="510" width="120" height="115" viewBox="-5 -5 86 86"
                                         class="avatar"
                                        >
                                        <a href="../zoos/gorilla/">
                                            <clipPath id="gorillaClip" class="avatar__clip"><use href="#avatarClipPath"/></clipPath>
                                            <use class="avatar__back" x="-17" y="-11" href="#avatarBg"/>
                                            <image class="avatar__img" x="-25" y="-7" width="120" height="81" clip-path="url(#gorillaClip)" href="../../assets/images/animals/simbi-yvan.jpg"/>
                                        </a>
                                    </svg>
                                    <svg x="510" y="390" width="410" height="110" 
                                         viewBox="0 0 410 110" 
                                         class="tooltip"
                                        >
                                        <use class="tooltip__back" href="#tooltipBg"/>
                                        <text x="50%" y="30%" class="tooltip__name" dominant-baseline="middle" text-anchor="middle">
                                            Gorilla
                                        </text>
                                        <text x="50%" y="50%" class="tooltip__description" dominant-baseline="middle" text-anchor="middle">
                                            GRACE gorillas
                                        </text>
                                    </svg>
                                </g>
                                <g id="panda">
                                    <svg x="1035" y="400" width="120" height="115" viewBox="-5 -5 86 86"
                                         class="avatar"
                                        >
                                        <a href="../zoos/panda/">
                                            <clipPath id="pandaClip" class="avatar__clip"><use href="#avatarClipPath"/></clipPath>
                                            <use class="avatar__back" x="-17" y="-11" href="#avatarBg"/>
                                            <image class="avatar__img" x="-20" y="-5" width="115" height="77" clip-path="url(#pandaClip)" href="../../assets/images/animals/xtina-yu.jpg"/>
                                        </a>
                                    </svg>
                                    <svg x="890" y="280" width="410" height="110" 
                                         viewBox="0 0 410 110" 
                                         class="tooltip"
                                        >
                                        <use class="tooltip__back" href="#tooltipBg"/>
                                        <text x="50%" y="30%" class="tooltip__name" dominant-baseline="middle" text-anchor="middle">
                                            Panda
                                        </text>
                                        <text x="50%" y="50%" class="tooltip__description" dominant-baseline="middle" text-anchor="middle">
                                            Shenshuping Gengda Panda Center
                                        </text>
                                    </svg>
                                </g>
                            </g>
                        </g>
                    </svg>
                </div>
            </div>
            <div class="_wrapper _wrapper--right">
                <div class="map__wrapper _wrapper__inner">
                    <div class="zoom">
                        <button id="zoomIn">
                            <svg class="zoom__plus" width="33" height="33">
                                <path d="M16.3 6.5V26M6.5 16.3H26" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
                                <circle cx="16.3" cy="16.3" r="15.5" fill="#fff" fill-opacity=".4" stroke="#fff" stroke-width="1.5"/>
                            </svg>
                        </button>
                        <button id="zoomOut">
                            <svg class="zoom__minus" width="33" height="33">
                                <path d="M7 16.3h19.5" stroke="#fff" stroke-width="1.5" stroke-linecap="round"/>
                                <circle cx="16.7" cy="16.3" r="15.5" fill="#fff" fill-opacity=".4" stroke="#fff" stroke-width="1.5"/>
                            </svg>                          
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="footer">
        <div class="_wrapper _wrapper--right">
            <div class="footer__wrapper _wrapper__inner">
                <div class="nav">
                    <div class="nav__logo">
                        <div class="logo">
                            <a class="logo__link nav__link" href="../landing/">
                                <img class="logo__img" src="../../assets/icons/logo.svg" alt="online zoo">
                            </a>
                        </div>
                    </div>
                    <ul class="nav__list">
                        <li class="nav__item"><a class="nav__link" href="../landing/">About</a></li>
                        <li class="nav__item"><a class="nav__link" href="../map/">Map</a></li>
                        <li class="nav__item"><a class="nav__link" href="../zoos/panda/">Zoos</a></li>
                        <li class="nav__item"><a class="nav__link" href="../error/">Contact us</a></li>
                        <li class="nav__item"><a class="nav__link" 
                            href="https://www.figma.com/file/vzrwoqf0kSG1uOify8BRBR/online-zoo?node-id=0%3A1">Design</a></li>
                    </ul>
                </div>
                <div class="copyright">
                    <address class="copyright__author">Design by Lemeshko Kateryna</address>
                    <p class="copyright__holder">©RSSchool and ©Yem Digital 2021</p>
                </div>
            </div>
        </div>
    </footer>

    <script type="module">
        import {Map} from './js/Map.js';
        import {MapHandler} from './js/MapHandler.js';

        const map = new Map('#mapSvg', '#mapCenter');
        const mapHandler = new MapHandler(map);
        mapHandler.startDragEvents();
        mapHandler.startScrollEvent();

        mapHandler.bindZoomIn({ element: document.getElementById('zoomIn') });
        mapHandler.bindZoomOut({ element: document.getElementById('zoomOut') });

        /* HIDE ONLOAD */
        document.addEventListener('DOMContentLoaded', event => {
            document.querySelectorAll('._hide-onload ').forEach(element => {
                element.classList.remove('_hide-onload');
            });
        });
    </script>
</body>
</html>